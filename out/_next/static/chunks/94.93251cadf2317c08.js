(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{2263:(e,t,r)=>{"use strict";r.d(t,{Im:()=>l,VD:()=>o,ZA:()=>u,dY:()=>f,hf:()=>m,i6:()=>p});var n=r(4796),a=r(2179),s=r(307);n.l2R.enabled=!0;let i=new a.Z,c=new s.B;i.setDecoderPath("/draco/"),c.setDRACOLoader(i);let u=c,o=new n.Tap,l=e=>{e?.traverse(e=>{if(e.isMesh)if(e.geometry.dispose(),e.material.isMaterial)d(e.material);else for(let t of e.material)d(t)})},d=e=>{for(let t of(e.dispose(),Object.keys(e))){let r=e[t];r&&"object"==typeof r&&"minFilter"in r&&(r.dispose(),r.source?.data?.close?.())}},f=e=>{e.dispose(),e=null},p=e=>{for(let t of e)t.parent.remove(t)},m=(e,t)=>{let r;return t.traverse(t=>{t.name===e&&(r=t)}),r}},7951:e=>{e.exports={earth:"Earth_earth__JkEiw",loader:"Earth_loader__etSdq",viewport:"Earth_viewport__KpU6W",canvas:"Earth_canvas__oZQmo",labels:"Earth_labels__EOpm3",label:"Earth_label__Zj8hY",vignette:"Earth_vignette__AO5zN",sections:"Earth_sections__SCyNu",section:"Earth_section__AKn9I"}},9893:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Earth:()=>O,EarthSection:()=>T});var n=r(7876);let a=r.p+"static/media/earth.510551ea.glb",s=r.p+"static/media/milkyway-nx.0e972b21.hdr",i=r.p+"static/media/milkyway-ny.006459f3.hdr",c=r.p+"static/media/milkyway-nz.5f35d5a4.hdr",u=r.p+"static/media/milkyway-px.2922755b.hdr",o=r.p+"static/media/milkyway-py.7aeec30d.hdr",l=r.p+"static/media/milkyway-pz.0ef64b21.hdr",d={src:"/_next/static/media/milkyway.dfc91e8e.jpg"};var f=r(8114),p=r(7046),m=r(6070),h=r(8713),y=r(7689),w=r(8097),v=r(9803),x=r(4232),b=r(7485),E=r(2475),g=r(4796);let _=(e,t,r)=>r?Math.min(e,t)===e?t:Math.max(e,r)===e?r:e:Math.max(e,t)===t?e:t;var k=r(7554),z=r(2263),C=r(7951),R=r.n(C);let A={x:0,y:0,z:2},j=(e,t,r)=>e+r*(t-e),N=e=>Object.keys(e).map(t=>parseFloat(Math.round(100*e[t])/100).toFixed(2)).join(", "),S=e=>e&&e.camera?{x:e.camera[0],y:e.camera[1],z:e.camera[2]}:A,P={stiffness:80,damping:40,mass:2,restSpeed:.001,restDelta:.001},L={stiffness:40,damping:30,mass:2,restSpeed:.001,restDelta:.001},M={stiffness:40,damping:30},F=(0,x.createContext)({}),O=({position:e=[0,0,0],scale:t=1,hideMeshes:r=[],labels:C=[],className:O,children:T})=>{let[D,I]=(0,x.useState)(!1),[Y,Z]=(0,x.useState)(!1),[q,J]=(0,x.useState)(!1),[B,W]=(0,x.useState)(!1),Q=(0,x.useRef)([]),U=(0,x.useRef)(),V=(0,x.useRef)(),$=(0,x.useRef)(),H=(0,x.useRef)(),K=(0,x.useRef)(),X=(0,x.useRef)(),G=(0,x.useRef)(),ee=(0,x.useRef)(),et=(0,x.useRef)(),er=(0,x.useRef)(),en=(0,x.useRef)(),ea=(0,x.useRef)(),es=(0,v.B4)($),ei=(0,x.useRef)(),ec=(0,x.useRef)(S(Q.current[0])),eu=(0,x.useRef)([]),eo=(0,x.useRef)(),el=(0,x.useRef)(),ed=(0,x.useRef)(),ef=(0,x.useRef)(),{width:ep,height:em}=(0,v.lW)(),eh=(0,y.I)(),ey=(0,w.z)(0,P),ew=(0,w.z)(0,P),ev=(0,w.z)(0,P),ex=(0,w.z)(0,L),eb=(0,w.z)(0,L),eE=(0,w.z)(0,L),eg=(0,w.z)(0,M),e_=(0,x.useCallback)(()=>{if(!es)return void cancelAnimationFrame(ei.current);ei.current=requestAnimationFrame(e_);let e=G.current.getDelta();ea.current.update(e),eo.current.update(),K.current.render(H.current,X.current),eu.current.forEach(e=>{let{element:t,position:r,sprite:n}=e,a=new g.Pq0(...r),s=X.current.position.distanceTo(er.current.position),i=X.current.position.distanceTo(n.position);a.project(X.current),a.x=Math.round((.5+a.x/2)*window.innerWidth),a.y=Math.round((.5-a.y/2)*window.innerHeight),t.style.setProperty("--posX",(0,k.gY)(a.x)),t.style.setProperty("--posY",(0,k.gY)(a.y)),i>s?t.dataset.occluded=!0:t.dataset.occluded=!1})},[es]);(0,x.useEffect)(()=>{ef.current=!0;let{innerWidth:e,innerHeight:t}=window;K.current=new g.JeP({canvas:$.current,antialias:!1,alpha:!0,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!0}),K.current.setPixelRatio(1),K.current.outputEncoding=g.S2Q,K.current.physicallyCorrectLights=!0,K.current.toneMapping=g.FV,X.current=new g.ubm(54,e/t,.1,100),X.current.position.x=ec.current.x,X.current.position.y=ec.current.y,X.current.position.z=ec.current.z,X.current.lookAt(0,0,0),ey.set(X.current.position.x,!1),ew.set(X.current.position.y,!1),ev.set(X.current.position.z,!1),H.current=new g.Z58,G.current=new g.zD7,et.current=new g.tBo;let r=new g.$p8(2236962,.05),n=new g.ZyN(0xffffff,1.5);n.position.set(3,0,1);let a=[r,n];return a.forEach(e=>H.current.add(e)),eo.current=new b.N(X.current,$.current),eo.current.enableZoom=!1,eo.current.enablePan=!1,eo.current.enableDamping=!1,eo.current.rotateSpeed=.5,()=>{ef.current=!1,cancelAnimationFrame(ei.current),(0,z.i6)(a),(0,z.Im)(H.current),(0,z.dY)(K.current)}},[]),(0,x.useEffect)(()=>{let e=()=>{Z(!0),ey.stop(),ew.stop(),ev.stop()},t=()=>{ey.set(X.current.position.x,!1),ew.set(X.current.position.y,!1),ev.set(X.current.position.z,!1),Z(!1)};return eo.current.addEventListener("start",e),eo.current.addEventListener("end",t),()=>{eo.current.removeEventListener("start",e),eo.current.removeEventListener("end",t)}},[ey,ew,ev]),(0,x.useEffect)(()=>{if(!D)return;let e=(0,z.hf)("Chunk",er.current),t=(0,z.hf)("Atmosphere",er.current),r=(e,t)=>{X.current.position[e]=t},n=ey.onChange(e=>r("x",e)),a=ew.onChange(e=>r("y",e)),s=ev.onChange(e=>r("z",e)),i=(t,r)=>{e.position[t]=r},c=ex.onChange(e=>i("x",e)),u=eb.onChange(e=>i("y",e)),o=eE.onChange(e=>i("z",e)),l=eg.onChange(e=>{t.material.opacity=e});return()=>{n(),a(),s(),c(),u(),o(),l()}},[ey,ew,ev,ex,eb,eE,D,eg]),(0,x.useEffect)(()=>{ep<=k.$_.tablet&&(eo.current.enabled=!1)},[ep]),(0,x.useEffect)(()=>{if(D)return;let r=new E.U,n=new g.BdL(K.current);n.compileCubemapShader();let f=async()=>{let r=await z.ZA.loadAsync(a);er.current=r.scene,en.current=r.animations,ea.current=new g.Iw4(er.current),ea.current.timeScale=.1,er.current.traverse(async e=>{let{material:t,name:r}=e;"Atmosphere"===r&&(t.alphaMap=t.map),t&&await K.current.initTexture(t)}),er.current.position.x=e[0],er.current.position.y=e[1],er.current.position.z=e[2],er.current.scale.x=t,er.current.scale.y=t,er.current.scale.z=t},p=async()=>{let e=await r.loadAsync([s,i,c,u,o,l]);e.magFilter=g.k6q,el.current=n.fromCubemap(e),n.dispose(),await K.current.initTexture(el.current.texture)},m=async()=>{let e=await z.VD.loadAsync(d.src);e.mapping=g.wfO,e.encoding=g.S2Q,H.current.background=e,await K.current.initTexture(e)},h=async()=>{await Promise.all([m(),p(),f()]),er.current.traverse(({material:e})=>{e&&(e.envMap=el.current.texture,e.needsUpdate=!0)}),ef.current&&I(!0)};(0,x.startTransition)(()=>{h(),setTimeout(()=>{W(!0)},1e3)})},[D,e,t]),(0,x.useEffect)(()=>(D&&!ed.current&&(H.current.add(er.current),ed.current=!0),D&&es&&(J(!0),e_()),()=>{cancelAnimationFrame(ei.current)}),[e_,es,D]),(0,x.useEffect)(()=>{D&&(V.current.innerHTML="",eu.current=C.map(e=>{let t=document.createElement("div");t.classList.add(R().label),t.dataset.hidden=!0,t.style.setProperty("--delay",`${e.delay||0}ms`),t.textContent=e.text,V.current.appendChild(t);let r=new g.kxk;return r.position.set(...e.position),r.scale.set(60,60,1),{element:t,...e,sprite:r}}))},[C,D]),(0,x.useEffect)(()=>{K.current.setSize(ep,em),X.current.aspect=ep/em,X.current.updateProjectionMatrix()},[ep,em]),(0,x.useEffect)(()=>{let e=$.current,t=e=>{let{innerWidth:t,innerHeight:r}=window;console.info({cameraPosition:N(X.current.position)}),ee.current=new g.I9Y(e.clientX/t*2-1,-(2*(e.clientY/r))+1),et.current.setFromCamera(ee.current,X.current);let n=et.current.intersectObjects(H.current.children,!0);n.length>0&&console.info({clickPosition:N(n[0].point)})};return()=>{e.removeEventListener("click",t)}},[]);let ek=(0,x.useCallback)(()=>{let e;if(!U.current)return;let{offsetTop:t}=U.current,{innerHeight:n}=window,a=window.scrollY-t;requestAnimationFrame(()=>{let t=_(Math.floor(a/n),0,Q.current.length-1),s=Q.current[t],i=Q.current[t+1],c=S(s)||A,u=S(i)||A,o=_((a-n*t)/n,0,1),l=j(c.x,u.x,o),d=j(c.y,u.y,o),f=j(c.z,u.z,o);e!==c&&Q.current.length&&s&&((e=>{let t=Q.current[e].meshes;er.current.traverse(e=>{let{name:n}=e,a=(0,z.hf)("Chunk",er.current),s=t?.includes(n),i=r?.includes(n);if(s)if("Atmosphere"===n)e.visible=!0,eg.set(1);else if("Chunk"===n){let t=new g.Pq0(-.4,.4,.4);e.visible=!0,eh?e.position.set(...t.toArray()):(ex.set(t.x),eb.set(t.y),eE.set(t.z))}else"EarthFull"===n&&a.visible?e.visible=!1:e.visible=!0;else if(i&&!s)if("Atmosphere"===n)eg.set(0);else if("Chunk"===n){let t=new g.Pq0(0,0,0);((e,t)=>{let r=(e=0)=>Math.round((e+Number.EPSILON)*100)/100;return r(e?.x)===r(t?.x)&&r(e?.y)===r(t?.y)&&r(e?.z)===r(t?.z)})(t,a.position)&&(e.visible=!1),ex.set(t.x),eb.set(t.y),eE.set(t.z)}else"EarthPartial"===n&&a.visible?e.visible=!0:e.visible=!1})})(t),(e=>{let t=Q.current[e].animations;!eh&&(en.current.forEach((e,r)=>{t.find(e=>e.includes(r.toString()))||ea.current.clipAction(e).reset().stop()}),en.current.length&&Q.current[e].animations&&t.forEach(e=>{let t=e.split(":"),r=en.current[Number(t[0])],n=ea.current.clipAction(r);t[1]&&"loop"===t[1]||(n.clampWhenFinished=!0,n.loop=g.G3T),n.play()}))})(t),eu.current.forEach(e=>{e.hidden&&(e.element.dataset.hidden=!0,e.element.setAttribute("aria-hidden",!0))}),Q.current[t].labels.forEach(e=>{eu.current.filter(t=>t.text===e).forEach(e=>{e.element.dataset.hidden=!1,e.element.setAttribute("aria-hidden",!1)})}));if(e=c,!Y){if(eh)return void X.current.position.set(l,d,f);ey.set(l),ew.set(d),ev.set(f)}})},[ey,ew,ev,ex,eb,eE,Y,r,eg,eh]);(0,x.useEffect)(()=>{let e=function(e,t){let r=0;return function(...t){let n=new Date;n-r>=100&&(e(...t),r=n)}}(ek,0);return D&&es&&window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[ek,es,D,eg]);let ez=(0,x.useCallback)(e=>{Q.current=[...Q.current,e]},[]),eC=(0,x.useCallback)(e=>{Q.current=Q.current.filter(t=>t!==e)},[]);return(0,n.jsx)(F.Provider,{value:{registerSection:ez,unregisterSection:eC},children:(0,n.jsxs)("div",{className:(0,k.Ly)(R().earth,O),ref:U,children:[(0,n.jsxs)("div",{className:R().viewport,children:[(0,n.jsx)("canvas",{className:R().canvas,"data-visible":D&&q,"data-grabbing":Y,ref:$}),(0,n.jsx)("div",{className:R().labels,"aria-live":"polite",ref:V}),(0,n.jsx)("div",{className:R().vignette})]}),(0,n.jsx)("div",{className:R().sections,children:T}),(0,n.jsx)(h.e,{unmount:!0,in:!D&&B,timeout:(0,k.IT)(m.L.base.durationL),children:e=>(0,n.jsx)(p.w,{className:R().loader,"data-visible":e,children:(0,n.jsx)(f.a,{})})})]})})},T=(0,x.memo)(({children:e,scrim:t,scrimReverse:r,className:a,camera:s=[0,0,0],animations:i=[],meshes:c=[],labels:u=[]})=>{let{registerSection:o,unregisterSection:l}=(0,x.useContext)(F),d=(0,x.useRef)(),f=JSON.stringify(i)+JSON.stringify(s)+JSON.stringify(u)+JSON.stringify(c);return(0,x.useEffect)(()=>{let e={camera:s,animations:i,meshes:c,labels:u,sectionRef:d};return o(e),()=>{l(e)}},[f,o,l]),(0,n.jsx)("div",{className:(0,k.Ly)(R().section,a),"data-scrim":t,"data-scrim-reverse":r,ref:d,children:e})})}}]);