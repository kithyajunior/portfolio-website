(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{8759:function(e,n,t){"use strict";t.r(n),t.d(n,{Earth:function(){return W},EarthSection:function(){return Y}});var r=t(7568),i=t(8616),a=t(1799),c=t(9396),u=t(9815),o=t(7582),s=t(5893),l=t.p+"static/media/earth.510551ea.glb",f=t.p+"static/media/milkyway-nx.0e972b21.hdr",d=t.p+"static/media/milkyway-ny.006459f3.hdr",v=t.p+"static/media/milkyway-nz.5f35d5a4.hdr",p=t.p+"static/media/milkyway-px.2922755b.hdr",h=t.p+"static/media/milkyway-py.7aeec30d.hdr",m=t.p+"static/media/milkyway-pz.0ef64b21.hdr",y="/_next/static/media/milkyway.dfc91e8e.jpg",w=t(7206),b=t(6602),x=t(3994),g=t(7260),E=t(3302),_=t(7378),C=t(4529),S=t(7294),k=t(3266),R=t(4443),j=t(9477),z=function(e,n,t){return t?Math.min(e,n)===e?n:Math.max(e,t)===e?t:e:Math.max(e,n)===n?e:n},N=t(2362),P=t(3142);var A=t(4708),M=t.n(A),L={x:0,y:0,z:2},Z=function(e,n,t){return e+t*(n-e)},F=function(e){return Object.keys(e).map((function(n){return parseFloat(Math.round(100*e[n])/100).toFixed(2)})).join(", ")},O=function(e){return e&&e.camera?{x:e.camera[0],y:e.camera[1],z:e.camera[2]}:L},q={stiffness:80,damping:40,mass:2,restSpeed:.001,restDelta:.001},T={stiffness:40,damping:30,mass:2,restSpeed:.001,restDelta:.001},J={stiffness:40,damping:30},D=(0,S.createContext)({}),W=function(e){var n=e.position,t=void 0===n?[0,0,0]:n,A=e.scale,W=void 0===A?1:A,Y=e.hideMeshes,H=void 0===Y?[]:Y,U=e.labels,B=void 0===U?[]:U,G=e.className,I=e.children,X=(0,S.useState)(!1),K=X[0],$=X[1],Q=(0,S.useState)(!1),V=Q[0],ee=Q[1],ne=(0,S.useState)(!1),te=ne[0],re=ne[1],ie=(0,S.useState)(!1),ae=ie[0],ce=ie[1],ue=(0,S.useRef)([]),oe=(0,S.useRef)(),se=(0,S.useRef)(),le=(0,S.useRef)(),fe=(0,S.useRef)(),de=(0,S.useRef)(),ve=(0,S.useRef)(),pe=(0,S.useRef)(),he=(0,S.useRef)(),me=(0,S.useRef)(),ye=(0,S.useRef)(),we=(0,S.useRef)(),be=(0,S.useRef)(),xe=(0,C.NM)(le),ge=(0,S.useRef)(),Ee=(0,S.useRef)(O(ue.current[0])),_e=(0,S.useRef)([]),Ce=(0,S.useRef)(),Se=(0,S.useRef)(),ke=(0,S.useRef)(),Re=(0,S.useRef)(),je=(0,C.iP)(),ze=je.width,Ne=je.height,Pe=(0,E.J)(),Ae=(0,_.q)(0,q),Me=(0,_.q)(0,q),Le=(0,_.q)(0,q),Ze=(0,_.q)(0,T),Fe=(0,_.q)(0,T),Oe=(0,_.q)(0,T),qe=(0,_.q)(0,J),Te=(0,S.useCallback)((function(){if(xe){ge.current=requestAnimationFrame(Te);var e=pe.current.getDelta();be.current.update(e),Ce.current.update(),de.current.render(fe.current,ve.current),_e.current.forEach((function(e){var n=e.element,t=e.position,r=e.sprite,a=(0,i.Z)(j.Pa4,(0,u.Z)(t)),c=ve.current.position.distanceTo(ye.current.position),o=ve.current.position.distanceTo(r.position)>c;a.project(ve.current),a.x=Math.round((.5+a.x/2)*window.innerWidth),a.y=Math.round((.5-a.y/2)*window.innerHeight),n.style.setProperty("--posX",(0,N.ml)(a.x)),n.style.setProperty("--posY",(0,N.ml)(a.y)),n.dataset.occluded=!!o}))}else cancelAnimationFrame(ge.current)}),[xe]);(0,S.useEffect)((function(){if((0,P.lN)()){Re.current=!0;var e=window.innerWidth,n=window.innerHeight;de.current=new j.CP7({canvas:le.current,antialias:!1,alpha:!0,powerPreference:"high-performance"}),de.current.setPixelRatio(1),de.current.outputEncoding=j.knz,de.current.physicallyCorrectLights=!0,de.current.toneMapping=j.LY2,ve.current=new j.cPb(54,e/n,.1,100),ve.current.position.x=Ee.current.x,ve.current.position.y=Ee.current.y,ve.current.position.z=Ee.current.z,ve.current.lookAt(0,0,0),Ae.set(ve.current.position.x,!1),Me.set(ve.current.position.y,!1),Le.set(ve.current.position.z,!1),fe.current=new j.xsS,pe.current=new j.SUY,me.current=new j.iMs;var t=new j.Mig(2236962,.05),r=new j.Ox3(16777215,1.5);r.position.set(3,0,1);var i=[t,r];return i.forEach((function(e){return fe.current.add(e)})),Ce.current=new k.z(ve.current,le.current),Ce.current.enableZoom=!1,Ce.current.enablePan=!1,Ce.current.enableDamping=!1,Ce.current.rotateSpeed=.5,function(){Re.current=!1,cancelAnimationFrame(ge.current),(0,P.Ji)(i),(0,P.in)(fe.current),(0,P.e8)(de.current)}}console.warn("WebGL not supported")}),[]),(0,S.useEffect)((function(){var e=function(){ee(!0),Ae.stop(),Me.stop(),Le.stop()},n=function(){Ae.set(ve.current.position.x,!1),Me.set(ve.current.position.y,!1),Le.set(ve.current.position.z,!1),ee(!1)};return Ce.current.addEventListener("start",e),Ce.current.addEventListener("end",n),function(){Ce.current.removeEventListener("start",e),Ce.current.removeEventListener("end",n)}}),[Ae,Me,Le]),(0,S.useEffect)((function(){if(K){var e=(0,P.x2)("Chunk",ye.current),n=(0,P.x2)("Atmosphere",ye.current),t=function(e,n){ve.current.position[e]=n},r=Ae.onChange((function(e){return t("x",e)})),i=Me.onChange((function(e){return t("y",e)})),a=Le.onChange((function(e){return t("z",e)})),c=function(n,t){e.position[n]=t},u=Ze.onChange((function(e){return c("x",e)})),o=Fe.onChange((function(e){return c("y",e)})),s=Oe.onChange((function(e){return c("z",e)})),l=qe.onChange((function(e){n.material.opacity=e}));return function(){r(),i(),a(),u(),o(),s(),l()}}}),[Ae,Me,Le,Ze,Fe,Oe,K,qe]),(0,S.useEffect)((function(){ze<=N.BC.tablet&&(Ce.current.enabled=!1)}),[ze]),(0,S.useEffect)((function(){if(!K){var e=new R.q,n=new j.anP(de.current);n.compileCubemapShader();var i=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,P.Zf.loadAsync(l)];case 1:return e=n.sent(),ye.current=e.scene,we.current=e.animations,be.current=new j.Xcj(ye.current),be.current.timeScale=.1,ye.current.traverse(function(){var e=(0,r.Z)((function(e){var n;return(0,o.__generator)(this,(function(t){switch(t.label){case 0:return n=e.material,"Atmosphere"===e.name&&(n.alphaMap=n.map),n?[4,de.current.initTexture(n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}));return function(n){return e.apply(this,arguments)}}()),ye.current.position.x=t[0],ye.current.position.y=t[1],ye.current.position.z=t[2],ye.current.scale.x=W,ye.current.scale.y=W,ye.current.scale.z=W,[2]}}))}));return function(){return e.apply(this,arguments)}}(),a=function(){var t=(0,r.Z)((function(){var t;return(0,o.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.loadAsync([f,d,v,p,h,m])];case 1:return(t=r.sent()).magFilter=j.wem,Se.current=n.fromCubemap(t),n.dispose(),[4,de.current.initTexture(Se.current.texture)];case 2:return r.sent(),[2]}}))}));return function(){return t.apply(this,arguments)}}(),c=function(){var e=(0,r.Z)((function(){var e;return(0,o.__generator)(this,(function(n){switch(n.label){case 0:return[4,P.Et.loadAsync(y)];case 1:return(e=n.sent()).mapping=j.dSO,e.encoding=j.knz,fe.current.background=e,[4,de.current.initTexture(e)];case 2:return n.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,r.Z)((function(){return(0,o.__generator)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([c(),a(),i()])];case 1:return e.sent(),ye.current.traverse((function(e){var n=e.material;n&&(n.envMap=Se.current.texture,n.needsUpdate=!0)})),Re.current&&$(!0),[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,S.startTransition)((function(){u(),setTimeout((function(){ce(!0)}),1e3)}))}}),[K,t,W]),(0,S.useEffect)((function(){return K&&!ke.current&&(fe.current.add(ye.current),ke.current=!0),K&&xe&&(re(!0),Te()),function(){cancelAnimationFrame(ge.current)}}),[Te,xe,K]),(0,S.useEffect)((function(){K&&(se.current.innerHTML="",_e.current=B.map((function(e){var n,t=document.createElement("div");t.classList.add(M().label),t.dataset.hidden=!0,t.style.setProperty("--delay","".concat(e.delay||0,"ms")),t.textContent=e.text,se.current.appendChild(t);var r=new j.jyi;return(n=r.position).set.apply(n,(0,u.Z)(e.position)),r.scale.set(60,60,1),(0,c.Z)((0,a.Z)({element:t},e),{sprite:r})})))}),[B,K]),(0,S.useEffect)((function(){de.current.setSize(ze,Ne),ve.current.aspect=ze/Ne,ve.current.updateProjectionMatrix()}),[ze,Ne]),(0,S.useEffect)((function(){var e=le.current,n=function(e){var n=window.innerWidth,t=window.innerHeight,r=F(ve.current.position);console.info({cameraPosition:r}),he.current=new j.FM8(e.clientX/n*2-1,-e.clientY/t*2+1),me.current.setFromCamera(he.current,ve.current);var i=me.current.intersectObjects(fe.current.children,!0);if(i.length>0){var a=F(i[0].point);console.info({clickPosition:a})}};return function(){e.removeEventListener("click",n)}}),[]);var Je=(0,S.useCallback)((function(){if(oe.current){var e,n=oe.current.offsetTop,t=window.innerHeight,r=window.scrollY-n,i=function(e){var n=ue.current[e].meshes;ye.current.traverse((function(e){var t=e.name,r=(0,P.x2)("Chunk",ye.current),i=null===n||void 0===n?void 0:n.includes(t),a=null===H||void 0===H?void 0:H.includes(t);if(i)if("Atmosphere"===t)e.visible=!0,qe.set(1);else if("Chunk"===t){var c,o=new j.Pa4(-.4,.4,.4);if(e.visible=!0,Pe)(c=e.position).set.apply(c,(0,u.Z)(o.toArray()));else Ze.set(o.x),Fe.set(o.y),Oe.set(o.z)}else"EarthFull"===t&&r.visible?e.visible=!1:e.visible=!0;else if(a&&!i)if("Atmosphere"===t)qe.set(0);else if("Chunk"===t){var s=new j.Pa4(0,0,0);(function(e,n){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Math.round(100*(e+Number.EPSILON))/100};return t(null===e||void 0===e?void 0:e.x)===t(null===n||void 0===n?void 0:n.x)&&t(null===e||void 0===e?void 0:e.y)===t(null===n||void 0===n?void 0:n.y)&&t(null===e||void 0===e?void 0:e.z)===t(null===n||void 0===n?void 0:n.z)})(s,r.position)&&(e.visible=!1),Ze.set(s.x),Fe.set(s.y),Oe.set(s.z)}else"EarthPartial"===t&&r.visible?e.visible=!0:e.visible=!1}))};requestAnimationFrame((function(){var n,a=ue.current.length-1,c=Math.floor(r/t),u=z(c,0,a),o=ue.current[u],s=ue.current[u+1],l=O(o)||L,f=O(s)||L,d=z((r-t*u)/t,0,1),v=Z(l.x,f.x,d),p=Z(l.y,f.y,d),h=Z(l.z,f.z,d);e!==l&&ue.current.length&&o&&(i(u),function(e){var n=ue.current[e].animations;Pe||(we.current.forEach((function(e,t){n.find((function(e){return e.includes(t.toString())}))||be.current.clipAction(e).reset().stop()})),we.current.length&&ue.current[e].animations&&n.forEach((function(e){var n=e.split(":"),t=we.current[Number(n[0])],r=be.current.clipAction(t);n[1]&&"loop"===n[1]||(r.clampWhenFinished=!0,r.loop=j.jAl),r.play()})))}(u),n=u,_e.current.forEach((function(e){e.hidden&&(e.element.dataset.hidden=!0,e.element.setAttribute("aria-hidden",!0))})),ue.current[n].labels.forEach((function(e){_e.current.filter((function(n){return n.text===e})).forEach((function(e){e.element.dataset.hidden=!1,e.element.setAttribute("aria-hidden",!1)}))}))),e=l,V||(Pe?ve.current.position.set(v,p,h):(Ae.set(v),Me.set(p),Le.set(h)))}))}}),[Ae,Me,Le,Ze,Fe,Oe,V,H,qe,Pe]);(0,S.useEffect)((function(){var e=function(e,n){var t=0;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var c=new Date;c-t>=n&&(e.apply(void 0,(0,u.Z)(i)),t=c)}}(Je,100);return K&&xe&&window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[Je,xe,K,qe]);var De=(0,S.useCallback)((function(e){ue.current=(0,u.Z)(ue.current).concat([e])}),[]),We=(0,S.useCallback)((function(e){ue.current=ue.current.filter((function(n){return n!==e}))}),[]);return(0,s.jsx)(D.Provider,{value:{registerSection:De,unregisterSection:We},children:(0,s.jsxs)("div",{className:(0,N.Sh)(M().earth,G),ref:oe,children:[(0,s.jsxs)("div",{className:M().viewport,children:[(0,s.jsx)("canvas",{className:M().canvas,"data-visible":K&&te,"data-grabbing":V,ref:le}),(0,s.jsx)("div",{className:M().labels,"aria-live":"polite",ref:se}),(0,s.jsx)("div",{className:M().vignette})]}),(0,s.jsx)("div",{className:M().sections,children:I}),(0,s.jsx)(g.u,{unmount:!0,in:!K&&ae,timeout:(0,N.zG)(x.T.base.durationL),children:function(e){return(0,s.jsx)(b.$,{className:M().loader,"data-visible":e,children:(0,s.jsx)(w.a,{})})}})]})})},Y=(0,S.memo)((function(e){var n=e.children,t=e.scrim,r=e.scrimReverse,i=e.className,a=e.camera,c=void 0===a?[0,0,0]:a,u=e.animations,o=void 0===u?[]:u,l=e.meshes,f=void 0===l?[]:l,d=e.labels,v=void 0===d?[]:d,p=(0,S.useContext)(D),h=p.registerSection,m=p.unregisterSection,y=(0,S.useRef)(),w=JSON.stringify(o)+JSON.stringify(c)+JSON.stringify(v)+JSON.stringify(f);return(0,S.useEffect)((function(){var e={camera:c,animations:o,meshes:f,labels:v,sectionRef:y};return h(e),function(){m(e)}}),[w,h,m]),(0,s.jsx)("div",{className:(0,N.Sh)(M().section,i),"data-scrim":t,"data-scrim-reverse":r,ref:y,children:n})}))},3142:function(e,n,t){"use strict";t.d(n,{Et:function(){return s},Ji:function(){return p},Zf:function(){return o},e8:function(){return v},in:function(){return f},lN:function(){return l},x2:function(){return h}});var r=t(9477),i=t(4521),a=t(4591);r.CtF.enabled=!0;var c=new i._,u=new a.E;c.setDecoderPath("/draco/"),u.setDRACOLoader(c);var o=u,s=new r.dpR,l=function(){try{var e=document.createElement("canvas"),n=e.getContext("webgl",{failIfMajorPerformanceCaveat:!0})||e.getContext("experimental-webgl");if(!n)return!1;var t=n.getExtension("WEBGL_lose_context");return null===t||void 0===t||t.loseContext(),!0}catch(r){return!1}},f=function(e){null===e||void 0===e||e.traverse((function(e){if(e.isMesh)if(e.geometry.dispose(),e.material.isMaterial)d(e.material);else{var n=!0,t=!1,r=void 0;try{for(var i,a=e.material[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;d(c)}}catch(u){t=!0,r=u}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}}}))},d=function(e){e.dispose();var n=!0,t=!1,r=void 0;try{for(var i,a=Object.keys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c,u,o,s=e[i.value];if(s&&"object"===typeof s&&"minFilter"in s)s.dispose(),null===(c=s.source)||void 0===c||null===(u=c.data)||void 0===u||null===(o=u.close)||void 0===o||o.call(u)}}catch(l){t=!0,r=l}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}},v=function(e){var n;e&&(e.dispose(),null===(n=e.forceContextLoss)||void 0===n||n.call(e),e=null)},p=function(e){var n=!0,t=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;c.parent.remove(c)}}catch(u){t=!0,r=u}finally{try{n||null==a.return||a.return()}finally{if(t)throw r}}},h=function(e,n){var t;return n.traverse((function(n){n.name===e&&(t=n)})),t}},4708:function(e){e.exports={earth:"Earth_earth__OpSy9",loader:"Earth_loader__FJ8SI",viewport:"Earth_viewport__uBdB2",canvas:"Earth_canvas__8O7Y6",labels:"Earth_labels__dku1G",label:"Earth_label__DShU9",vignette:"Earth_vignette__8nqic",sections:"Earth_sections__KalJU",section:"Earth_section__EU8Lb"}}}]);